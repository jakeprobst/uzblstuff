Nur in Eigene/Coden/uzbl-scripts/uzbltreetab/src/: .svn.
diff uzbltabem/src/uzbltreetab//uzblinstance.cpp Eigene/Coden/uzbl-scripts/uzbltreetab/src//uzblinstance.cpp
5a6
> #include <stdlib.h>
7,9c8
< //int UzblInstance::ID = 0;
< 
< UzblInstance::UzblInstance(char* u, char* fifo, GtkNotebook* n, GtkTreeRowReference* r)
---
> UzblInstance::UzblInstance(char* u, GtkNotebook* n, GtkTreeRowReference* r)
11d9
<     //id = ID++;
14,17c12
<         
<     sprintf(fifopath, "/tmp/uzbl_fifo_%s", fifo);
<     sprintf(sockpath, "/tmp/uzbl_socket_%s", fifo);
<     
---
> 
21c16
<     
---
> 
26,32c21,42
<     char cmd[1024];
<     
<     sprintf(cmd, "uzbl-browser tab %d %s \"%s\"",
<                  gtk_socket_get_id(socket), sockpath, u);
<     
<     printf("%s\n", cmd);
<     g_spawn_command_line_async(cmd, NULL);
---
>     gchar *cmd;
>     cmd = g_strdup_printf("uzbl-core -s %d --connect-socket %s --uri \"%s\"",
>                  gtk_socket_get_id(socket), getenv("DAEMON_SOCKET"), u);
>     //gboolean ret;
>     gint argc;
>     gchar **argv = NULL;
>     GSpawnFlags flags;
>     g_shell_parse_argv(cmd,
>     		   &argc,
>     		   &argv,
>     		   NULL);
> 
>     flags = (GSpawnFlags)(G_SPAWN_SEARCH_PATH | G_SPAWN_STDOUT_TO_DEV_NULL | G_SPAWN_STDERR_TO_DEV_NULL );
>     /*                  dir         env */
>     //ret = 
>     g_spawn_async(NULL, argv, NULL, flags, NULL, NULL, &pid, NULL);
> 
>     g_strfreev(argv);
>     g_free(cmd);
> 
>     sprintf(pids, "%d", (int)pid);
>     printf("New instance %d\n", (int)pid);
39,41c49
<     
<     unlink(fifopath);
<     unlink(sockpath);
---
> 
43c51
<     
---
> 
diff uzbltabem/src/uzbltreetab//uzblinstance.h Eigene/Coden/uzbl-scripts/uzbltreetab/src//uzblinstance.h
14a15
> 	char pids[8];
17c18
<         
---
> 
20c21
<         
---
> 
23,26c24,27
<         
<         char fifopath[256];
<         char sockpath[256];
<     
---
> 
>         //char fifopath[256];
>         //char sockpath[256];
> 
32,33c33,34
<         char* GetFifoPath() {return fifopath;}
<         char* GetSocketPath() {return sockpath;}
---
>         //char* GetFifoPath() {return fifopath;}
>         //char* GetSocketPath() {return sockpath;}
35a37
>         char* GetPidString() {return pids;};
44c46
<         
---
> 
47c49
<         
---
> 
50c52
<         UzblInstance(char*, char*, GtkNotebook*, GtkTreeRowReference*);
---
>         UzblInstance(char*, GtkNotebook*, GtkTreeRowReference*);
diff uzbltabem/src/uzbltreetab//uzbltreetab.cpp Eigene/Coden/uzbl-scripts/uzbltreetab/src//uzbltreetab.cpp
13c13
<     
---
> 
21c21
<     
---
> 
24c24
<     
---
> 
35c35
<     
---
> 
47c47
<     
---
> 
50c50
<     
---
> 
52c52
<     
---
> 
61c61
<     
---
> 
70c70
<     
---
> 
78c78
<     
---
> 
85c85
<     
---
> 
88c88
<     
---
> 
91c91
<         NewTab("about:blank");
---
>         NewTab((char*)"about:blank");
99c99
<     
---
> 
113c113
<     
---
> 
116c116
<     
---
> 
120c120
<         
---
> 
124c124
<         
---
> 
128c128
<         
---
> 
130c130
<         
---
> 
144,145c144,145
<  
<  
---
> 
> 
148c148
<     
---
> 
152c152
<     
---
> 
157c157
<         
---
> 
160c160
<             
---
> 
162,163c162,163
<                 printf("[%s]\n", sbuf);
<                 
---
>                 //printf("[%s]\n", sbuf);
> 
167,168c167,168
<                 printf("[%s:%d]\n", url, child);
<                 
---
>                 //printf("[%s:%d]\n", url, child);
> 
171c171
<             
---
> 
183c183
< {    
---
> {
200c200
<     
---
> 
204c204
<     
---
> 
206c206
<     
---
> 
220c220
<         
---
> 
225c225
<     
---
> 
227c227
<     
---
> 
233c233
<     
---
> 
244c244
<     
---
> 
266c266
<     
---
> 
272c272
<     
---
> 
278c278
<             
---
> 
290c290
<         
---
> 
303c303
<         
---
> 
307c307
<     
---
> 
318c318
<     
---
> 
323c323
<     
---
> 
329c329
<     
---
> 
331c331
<     
---
> 
344,345c344,345
<         else 
<             NewTab("about:blank");
---
>         else
>             NewTab((char*)"about:blank");
351,352c351,352
<         else 
<             NewTab("about:blank", currenttab);
---
>         else
>             NewTab((char*)"about:blank", currenttab);
386c386
<             
---
> 
389c389
<             
---
> 
392c392
<             
---
> 
397c397
<             
---
> 
410c410
<             
---
> 
413c413
<             
---
> 
423c423
<            if (!strcmp(cmd[1], ((UzblInstance*)l->data)->GetSocketPath())) {
---
> 	   if (!strcmp(cmd[1], ((UzblInstance*)l->data)->GetPidString())) {
433c433
<            if (!strcmp(cmd[1], ((UzblInstance*)l->data)->GetSocketPath())) {
---
>            if (!strcmp(cmd[1], ((UzblInstance*)l->data)->GetPidString())) {
455c455
<     
---
> 
459c459
<         
---
> 
463c463
<         
---
> 
467c467
<         
---
> 
480c480
<     
---
> 
484c484
<         
---
> 
504c504
<         
---
> 
511c511
<         
---
> 
518,519c518,519
<     char sockid[128];
<     sprintf(sockid, "%d_%d", getpid(), fifocount++);
---
>     //char sockid[128];
>     //sprintf(sockid, "%d_%d", getpid(), fifocount++);
524c524
<         
---
> 
526c526
<         
---
> 
529c529
<         
---
> 
531c531
<         
---
> 
536c536
<     
---
> 
540,541c540,542
<     
<     UzblInstance* uzin = new UzblInstance(url, sockid, notebook, ref);
---
> 
>     // sockid,
>     UzblInstance* uzin = new UzblInstance(url, notebook, ref);
544c545
<     
---
> 
546,548c547,550
<     gtk_tree_model_iter_parent(GTK_TREE_MODEL(tabmodel), &piter, &iter);
<     GtkTreePath* parent = gtk_tree_model_get_path(GTK_TREE_MODEL(tabmodel), &piter);
<     
---
>     GtkTreePath* parent=NULL;
>     if(gtk_tree_model_iter_parent(GTK_TREE_MODEL(tabmodel), &piter, &iter))
> 	parent = gtk_tree_model_get_path(GTK_TREE_MODEL(tabmodel), &piter);
> 
552c554
<         
---
> 
555c557
<         
---
> 
567c569
<     
---
> 
571c573
<     
---
> 
